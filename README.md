# iNat Telegram Poster

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±–æ—Ç**, –∫–æ—Ç–æ—Ä—ã–π –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –ø—É–±–ª–∏–∫—É–µ—Ç –≤ Telegram-–∫–∞–Ω–∞–ª—ã —Å–ª—É—á–∞–π–Ω—ã–µ, –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∏–∑ iNaturalist, —Å–æ–≥–ª–∞—Å–Ω–æ –≥–∏–±–∫–∏–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º API-–∑–∞–ø—Ä–æ—Å–æ–≤.

## –í–µ—Ä—Å–∏—è

+ **0.8.0** ‚Äî *–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π* —Ä–µ–ª–∏–∑.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≥–∏–±–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ iNaturalist API: –ø—Ä–æ–µ–∫—Ç—ã, —Ç–∞–∫—Å–æ–Ω—ã, –º–µ—Å—Ç–∞, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –¥—Ä.
- –û—á–µ—Ä–µ–¥—å –ø—É–±–ª–∏–∫–∞—Ü–∏–π —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º —Å–≤–µ–∂–∏—Ö –Ω–∞–±–ª—é–¥–µ–Ω–∏–π, –∑–∞—Ç–µ–º –ø—É–ª–æ–º –∏ –∞—Ä—Ö–∏–≤–æ–º –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö (–±–µ–∑ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤).
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ 10 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ –≤ –æ–¥–Ω–æ–º –ø–æ—Å—Ç–µ.
- –í—ã–≤–æ–¥ —ç–º–æ–¥–∑–∏ –∏ —Ö–µ—à—Ç–µ–≥–æ–≤, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∏–µ—Ä–∞—Ä—Ö–∏–∏ —Ç–∞–∫—Å–æ–Ω–æ–≤.
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–æ–∫ –Ω–∞ –ø—Ä–æ–µ–∫—Ç—ã –∏ –º–µ—Å—Ç–∞ –∏–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
- –ú–µ—Ö–∞–Ω–∏–∑–º –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞.
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞
bundle install

# 2. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, config.yaml)
cat > config.yaml << EOF
base_query:
  project_id: 12345
  popular: true
  quality_grade: research
  locale: ru
days_back: 30
chat_id: -1001234567890
retries: 5
EOF

# 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export TELEGRAM_BOT_TOKEN="–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞"
export ADMIN_TELEGRAM_ID="ID_–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞_–≤_Telegram"

# 4. –ó–∞–ø—É—Å–∫
bin/inat-channel -c config.yaml

# 5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ cron –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
echo "0 9 * * * cd /–ø—É—Ç—å/–∫/–ø—Ä–æ–µ–∫—Ç—É && bin/inat-channel -c config.yaml >> log/cron.log 2>&1" | crontab -
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ø—Ä–∏–º–µ—Ä)

```yaml
base_query:          # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ –∫ iNaturalist API (Hash)
  project_id: 12345
  popular: true
  quality_grade: research
  locale: ru
days_back: 30        # –ö–æ–ª-–≤–æ –¥–Ω–µ–π –Ω–∞–∑–∞–¥ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (integer > 0)
chat_id: -1001234567890  # ID Telegram –∫–∞–Ω–∞–ª–∞ –∏–ª–∏ –≥—Ä—É–ø–ø—ã
retries: 5           # –ö–æ–ª-–≤–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ (API –∏ Telegram)

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ ‚Äî –ø—É—Ç–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (–ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤)
pool_file: "data/pool.json"
sent_file: "data/sent.json"
lock_file: "data/bot.lock"

# –ê–≤—Ç–æ—Å—Å—ã–ª–∫–∏ –ø–æ place_ids
places:
  group:
    - place_ids: [1, 2]
      link: "https://inaturalist.org/projects/12345"
      text: "Moscow Region Project"
```

## –ó–∞–ø—É—Å–∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏–ª–∏ —Ä–µ–≥–∏–æ–Ω–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, —É–∫–∞–∑–∞–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ç–¥–µ–ª—å–Ω—ã–µ `pool_file`, `sent_file` –∏ `lock_file`.

```bash
config/
‚îú‚îÄ‚îÄ moscow.yaml       # –¥–∞–Ω–Ω—ã–µ: data/moscow_pool.json + moscow.lock
‚îî‚îÄ‚îÄ spb.yaml          # –¥–∞–Ω–Ω—ã–µ: data/spb_pool.json + spb.lock

bin/inat-channel -c config/moscow.yaml &
bin/inat-channel -c config/spb.yaml &
```

–í–∞–∂–Ω–æ: —Ñ–∞–π–ª—ã –ø—É–ª–∞ –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –≥–æ–Ω–æ–∫ –∏ —Å–±–æ–µ–≤.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –∏ –¥–∞–Ω–Ω—ã—Ö

```
‚îú‚îÄ‚îÄ config.yaml        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ø—Ä–∏–º–µ—Ä)
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ pool.json      # –ö—ç—à –Ω–æ–≤—ã—Ö UUID –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ sent.json      # UUID —É–∂–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ + id —Å–æ–æ–±—â–µ–Ω–∏–π Telegram
‚îÇ   ‚îî‚îÄ‚îÄ bot.lock       # –õ–æ–∫-—Ñ–∞–π–ª –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞
‚îú‚îÄ‚îÄ log/               # –õ–æ–≥–∏ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞
‚îî‚îÄ‚îÄ bin/inat-channel   # –û—Å–Ω–æ–≤–Ω–æ–π –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª –±–æ—Ç–∞
```

## –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤

- Lock-—Ñ–∞–π–ª —Å TTL 30 –º–∏–Ω—É—Ç.
- –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.
- –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–æ —Å–∏–≥–Ω–∞–ª–∞–º INT –∏ TERM (graceful shutdown).
- –û—à–∏–±–∫–∞, –µ—Å–ª–∏ –±–æ—Ç —É–∂–µ –∑–∞–ø—É—â–µ–Ω —Å —Ç–µ–º –∂–µ –∫–æ–Ω—Ñ–∏–≥–æ–º.

–ü—Ä–∏–º–µ—Ä:

```bash
$ bin/inat-channel -c config.yaml    # PID 12345 –∑–∞—Ö–≤–∞—Ç–∏–ª lock
$ bin/inat-channel -c config.yaml    # –û—à–∏–±–∫–∞: –ø—Ä–æ—Ü–µ—Å—Å —Å PID 12345 —É–∂–µ –∑–∞–ø—É—â–µ–Ω
```

## –ü—Ä–∏–º–µ—Ä –ø–æ—Å—Ç–∞ –≤ Telegram

```
ü™∂ <b>–û–±—ã–∫–Ω–æ–≤–µ–Ω–Ω—ã–π —Å–Ω–µ–≥–∏—Ä—å</b> <i>(Pyrrhula pyrrhula)</i>

üì∑ #123456 ‚Äî üë§ <a href="...">Ivan Ivanov</a> @ üìÖ 2025-11-15

üó∫Ô∏è <a href="...">Moscow Region Project</a>

‚Ü≥ üó∫Ô∏è 55.7558¬∞N, 37.6173¬∞E

#Animalia¬†‚Ä¢¬†#Aves¬†‚Ä¢¬†#Pyrrhula_pyrrhula
```

## –û–ø—Ü–∏–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

```bash
bin/inat-channel --help

# –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
# -c, --config FILE     –ü—É—Ç—å –∫ –∫–æ–Ω—Ñ–∏–≥—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é inat-channel.yaml)
# -l, --log-level LEVEL –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (debug/info/warn/error)
# --debug               –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ debug
```

## –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- [iNaturalist API v2](https://www.inaturalist.org/pages/api+reference)
- [Faraday HTTP Client](https://github.com/lostisland/faraday)

**–õ–∏—Ü–µ–Ω–∑–∏—è**: [GPLv3](LICENSE)

